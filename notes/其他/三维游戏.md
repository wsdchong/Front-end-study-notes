# 三维游戏

## 第零章：绪论

1.网络游戏编程：

服务端：网络编程、人工智能、数据库、信息安全

客户端：2D游戏编程、3D游戏编程、美工设计、音乐设计

其他必要流程：游戏剧本策划、游戏项目管理、文档编辑等

2.DirectX的优势：功能丰富的底层API、比OpenGL应用更广、比unity更底层，功能扩展更强。

3.学习内容：图形学的数学知识、3D技术（光照、纹理、alpha混合等）、3D游戏必要技术（三维网格模型、动画网格模型等）

 

## 第一章：面向对象的游戏编程原理

1.游戏开发基本流程：游戏初始化过程主要是游戏内容的缓存；游戏实现过程主要通过用户操作、游戏逻辑过程、游戏内容渲染三个过程交替循环实现。

 

## 第二章：Windows编程基础

1.Windows的消息机制：通过事件来描述程序的运行状态或环境的改变；通过消息来通知应用程序某个事件的发生，然后调用相应程序响应。（多字节字符集）

2.生成Windows窗体的流程：WinMain()函数、设计和注册窗口类WNDCLASS、创建窗口createwindow()、显示和更新窗口showwindow()、消息循环MSG（getmessage、peekmessage）、注销窗口类UnRegisterClass()

3.窗口过程：键盘消息WM_KEYWON、鼠标消息WM_MOUSEMOVE、时间消息

 

## 第三章：DirectX简介

1.绘制流水线：3D物体模型、世界变换、取景变换、背面消隐、光照、裁剪、透视投影、视口变换、光栅化、2D图片（局部坐标、世界坐标、投影坐标、观察坐标）

2.视口变换：缩放、平移

3代码封装：Main模块<-MyD3D<-D3DUT

MyD3D类：CreateDevice函数(创建窗口和获得接口)、initialize函数（常规初始化）、FrameMove函数、Render函数、release函数（内存释放）、getDevice函数（返回接口）

 

## 第四章：基本空间变换

1.左手坐标系：平面直角坐标系的基础上添加一条指向内部的Z轴。

2点积常用于判断向量间的垂直问题。叉积常用于计算平面法向量的问题。

3.矩阵变换：旋转

 

## 第五章：基于顶点缓存的图形绘制

1.基于顶点缓存的图形绘制（IDirect3DVertexBuffer9顶点缓存接口类）

顶点结构体设置

创建顶点缓冲： CreateVertexBuffer()方法

（FVF自由顶点格式：三维顶点、颜色顶点、纹理顶点）

访问缓存内容：lock、unlock

数据流输入源指定：SetStreamSource(数目、指针、偏移量)

顶点格式设置：SetFVF坐标、法线、漫反射、镜面反射、纹理坐标。

顶点缓存绘制：DrawPrimitive：种类、起始点、数目

 

2基于索引缓存的图形绘制

创建顶点索引缓存：CreateIndexBuffer

访问缓存内容

指定输入源

绘制DrawIndexedPrimitive函数

 

3.基于颜色顶点的图形绘制

创建颜色顶点缓冲区：CreateVertexBuffer（colorvertex）

访问顶点缓存区lock、unlock

渲染颜色顶点缓存：Flat（第一个顶点为整个图元颜色）、Gouraud（线性插值算法）、Phong三种着色模式

 

4基于纹理顶点的图形绘制

创建顶点缓存CreateVertexBuffer（texturevertex）

LOCK

纹理缓存：D3DXCreateTextureFromFile

纹理顶点的绘制SetTexture

纹理过滤器（采样）：最近点采样、线性纹理过滤、各向异性纹理过滤、多级渐进过滤

 

 

## 第六章：融合技术

1.融合技术：将未光栅化的颜色与已光栅化的颜色合成。如将水壶在桌子上显示

 

## 第七章：光照与材质

1.光源（点光源、方向光、聚光灯）

2光照（漫射光、镜面光、环境光）：diffuse、specular、ambient

3材质



## 第八章：动画网格模型与三维网格模型

1.将带骨骼的XFile文件导出

补充：设计camera、地形、粒子系统。以及网格和拾取。

 

平时成绩占30%（出勤10%、作业20%）、实践设计成绩40%、期末考试成绩占30%。

 

一、选择题4*10

1.DirectX 3D使用的左手坐标系为Y轴向上、Z轴指向屏幕内。

2创建模型的空间是本地空间。（世界空间、投影空间、视图空间）

3drawprimitive函数的定义；

4实际应用中的相对纹理坐标的取值范围通常是0<=u<1，0<=v<1。

5在常用的纹理采样方式中，应用最广泛，极大提高图像质量，同时不增加系统负担的纹理采样方式是线性纹理过滤。（最近点采样、各向异性纹理采样、多级渐进纹理过滤）。

6在光源类型中，不需要坐标和范围的是方向光。（点光源、聚光灯、环境光）

7在D3D中，激活光照运算的函数是setlight（_index,&_D3Dlight）

8在D3D中，定义网格模型的接口是mesh

9在DirectX所支持的渲染模式。使用多边形第一个顶点颜色作为整个多边形颜色的模式是flat模式。

10在平面着色模型中，图元的颜色由第一个顶点的颜色决定。

 

二、填空题3*10

1在D3D中常用的导入库是winmlib、d3d9.lib、d3dx9.lib。

2材质中描述物体反射光的反射属性：漫反射、镜面反射、环境光

3若建立一个带颜色的顶点结构，则顶点的灵活顶点格式FVF组合标志是D3DVF_XYZ|D3DVF_DIFFUSE

4将三角形X轴扩大2倍、平移1.25个单位，旋转2弧度。

D3DXMATRIX _mTrans,

 

三、程序题30

请标注顶点V的索引值与纹理UV值。

 

书上理论

第二章
 1Unicode字符集和多字节字符集。（22页3补充知识点）
 2peekmessage函数可以自由返回、getmassage函数只有收到消息才能返回（26页）
 3常用键的虚拟键码VK_UP和客户区鼠标消息WM_MOUSEMOVE（29常用键的虚拟键码31客户区鼠标消息）

第三章：1视口变换的作用是将投影变换后的投影结果变换到视口中。可用矩阵实现坐标的平移和缩放（49计算投影变换矩阵）
 第四章：1点积（65页）
 第五章
 1基于顶点索引缓存的图形绘制：drawindexprimitive函数（89页）

2（代码阅读）基于纹理顶点的图形绘制（108页）
 3采样（110页）

第七章
 1在D3D中，各种光源均有漫射光、镜面光、环境光三种光照模型，为模拟物体材质对者三种光照的反射效果，材质页有对应这三种光的反射属性diffuse、specular、ambient。（139页）